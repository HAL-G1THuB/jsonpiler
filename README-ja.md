# Jsonpiler - JSONæ–‡æ³•ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªž

**Jsonpiler(ã‚¸ã‚§ã‚¤ã‚½ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼)**ã¯  
Jsonã¨ã»ã¼åŒæ§˜ã®æ–‡æ³•ã§ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªžã¨ã€  
ãã‚Œã‚’å®Ÿè¡Œå¯èƒ½ãª.exeãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã™ã€‚

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€JSONãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’GNUã‚¢ã‚»ãƒ³ãƒ–ãƒªã«å¤‰æ›ã—ã€
ã•ã‚‰ã«ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ã«GNU ASã€GNU LDã‚’ä½¿ç”¨ã—ã¦çµæžœã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

[è‹±èªž(English)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/README.md)

- [GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/HAL-G1THuB/jsonpiler)  
- [Crates.io](https://crates.io/crates/jsonpiler)  
- [Docs.rs](https://docs.rs/jsonpiler/latest/jsonpiler)  
- [AIç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ![badge](https://deepwiki.com/badge.svg)](https://deepwiki.com/HAL-G1THuB/jsonpiler)  
ðŸš¨ **Windowsã§ã®ã¿ä½œå‹•ã—ã¾ã™ (x64)!** ðŸš¨

## å¤‰æ›´å±¥æ­´

- **å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’1GBä»¥ä¸‹ã«åˆ¶é™ã—ãŸãŸã‚ã€ä¸è¦ã¨ãªã£ãŸãƒ‘ãƒ¼ã‚µãƒ¼å†…ã®ã‚»ãƒ¼ãƒ•ãƒ†ã‚£ãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’æŽ’é™¤ã—ã€é«˜é€ŸåŒ–ã€‚**
- **ã‚¢ã‚»ãƒ³ãƒ–ãƒªå‘½ä»¤ã®ä¿å­˜æ–¹æ³•ã‚’å¤‰ãˆã€å‡¦ç†é€Ÿåº¦ã¨ãƒ¡ãƒ¢ãƒªåŠ¹çŽ‡ã‚’æ”¹å–„ã€‚**
- **cã®é–¢æ•°(malloc, free)ã¸ã®ä¾å­˜ã‚’ãªãã—ãŸã“ã¨ã«ã‚ˆã‚Šã€`ucrtbase.dll`ãŒä¸è¦ã¨ãªã£ãŸã€‚**
- **çµ„ã¿è¾¼ã¿é–¢æ•°ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè‚¥å¤§åŒ–ã—ãŸãŸã‚ã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã—ãŸã€‚**
- **å¤‰æ•°ã«æŸç¸›ã•ã‚Œã¦ã„ãªã„é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚ŒãŸä¸€æ™‚çš„ãªå€¤ãŒè§£æ”¾ã•ã‚Œã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒã€ãã®é–¢æ•°ãŒçµ‚äº†ã—ãŸã¨ãã«å®šã¾ã£ãŸã€‚(ä¾‹å¤–ã¨ã—ã¦ã€`if`ã®æœ¬ä½“ã®æœ€å¾Œã®ä¸€æ™‚çš„ãªå€¤ã¯è§£æ”¾ã•ã‚Œã‚‹)**
- **`if`, `scope`,`lambda`ã®å¼•æ•°ã®å½¢å¼ãŒå¤‰æ›´ã•ã‚ŒãŸã€‚**
- **æ–°ã—ã„é–¢æ•°`value`ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã®é–¢æ•°ã¯ä¸Žãˆã‚‰ã‚ŒãŸè©•ä¾¡æ¸ˆã¿ã®å€¤ã‚’ãã®ã¾ã¾è¿”ã—ã€Objectã®å‘½ä»¤åˆ—ã®æœ€å¾Œã«ãƒªãƒ†ãƒ©ãƒ«ã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚**
- æ–°ã—ã„é–¢æ•°ã‚’è¿½åŠ : `not`, `xor`, `or`, `and`
- çµ„ã¿è¾¼ã¿é–¢æ•°ãŒè‚¥å¤§åŒ–ã—ãŸãŸã‚ã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åˆ†å‰²ã—ãŸã€‚
- å‘½ä»¤ã®è‚¥å¤§åŒ–ã«ã‚ˆã‚‹æ€§èƒ½ä½Žä¸‹ãŒäºˆæƒ³ã•ã‚Œã‚‹ãŸã‚ã€boolåž‹ã®ãƒ¡ãƒ¢ãƒªé ˜åŸŸã‚’1bitã‹ã‚‰1byteã«å¤‰æ›´ã€‚
- é–¢æ•°ã®å¼•æ•°æ¤œè¨¼ã‚’ç›´æ„Ÿçš„ã«ã€‚
[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ­´å²ã¨è¨ˆç”»](https://github.com/HAL-G1THuB/jsonpiler/blob/main/CHANGELOG-ja.md)

## å‰ææ¡ä»¶

**ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€PATHç’°å¢ƒå¤‰æ•°ã§åˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„:**

- `ld` (from MinGW-w64)  
- `as` (from MinGW-w64)  

**ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ­£å¸¸ã«å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®DLLãŒC:Windows/System32/ã«å­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**

- `kernel32.dll`  
- `user32.dll`  

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ä½¿ç”¨æ–¹æ³•

```bash
cargo install jsonpiler
jsonpiler (input_json_file (UTF-8)) [arguments of .exe ...]
```

(input_json_file)`ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸã„å®Ÿéš›ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## ä¾‹

[ä¾‹](https://github.com/HAL-G1THuB/jsonpiler/blob/main/examples)

```json
{ "=": ["a", "title"], "message": [{"$": "a"}, "345"] }
```

**å®Ÿè¡Œé †åº:**

jsonpilerã®ã‚³ãƒ¼ãƒ‰ã¯1ã¤ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æ§‹æˆã•ã‚Œã¾ã™ã€‚

å¼ã¯é †ç•ªã«è©•ä¾¡ã•ã‚Œã¾ã™ã€‚

å¤‰æ•° `"a"` ã«ã¯ `"="` ã‚’ä½¿ã£ã¦æ–‡å­—åˆ— `"title"` ãŒä»£å…¥ã•ã‚Œã¾ã™ã€‚

ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆå¤‰æ•° `"a"` ã‹ã‚‰ï¼‰ã¨æœ¬æ–‡ `"message"` ã§æŒ‡å®šã•ã‚ŒãŸ `"345"` ã‚’å«ã‚€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ `{}` ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€çµ‚å€¤ã¨ã—ã¦ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹ã®ä¸­ã§æŠ¼ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã® ID ã‚’æ•´æ•°ã§è¿”ã—ã¾ã™ï¼ˆç¾åœ¨ã¯ `1` ã®ã¿ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ãŠã‚Šã€C/C++ ã§ã¯ `IDOK` ã«ç›¸å½“ã—ã¾ã™ï¼‰ã€‚

## ã‚¨ãƒ©ãƒ¼ã€ã‚‚ã—ãã¯è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å½¢å¼

```json
{ "message": ["ã‚¿ã‚¤ãƒˆãƒ«", { "$": "å­˜åœ¨ã—ãªã„" }] }
```

```text
Compilation error: Undefined variables: `å­˜åœ¨ã—ãªã„`
Error occurred on line: 1
Error position:
{ "message": ["title", { "$": "doesn't_exist" }] }
                              ^^^^^^^^^^^^^^^
```

## é–¢æ•°ä¸€è¦§

[é–¢æ•°ä¸€è¦§ (ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/docs/functions.md)

## è¨€èªžä»•æ§˜

[è¨€èªžä»•æ§˜ (ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/docs/specification.md)

## å®Ÿè¡Œã®ã‚¤ãƒ¡ãƒ¼ã‚¸å›³

```mermaid
graph TD
  A[file.json] --> B{Jsonpiler}
  B -->|Parse| C([AST])
  C -->|æœ¬ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«| D[file.s]
  D --> |GNU ASã§ã‚¢ã‚»ãƒ³ãƒ–ãƒ«| E[file.obj]
  E --> |GNU LDã§ãƒªãƒ³ã‚¯| F[file.exe]
  S[C:\Windows\System32\] --> KERNEL32[kernel32.dll] --> F
  S --> USER32[user32.dll] --> F
  F --> Exec[(å®Ÿè¡Œ)]
```
