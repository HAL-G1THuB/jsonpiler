# Jsonpiler - JSONæ–‡æ³•ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªž

**Jsonpiler**(**ã‚¸ã‚§ã‚¤ã‚½ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼**)ã¯  
Jsonã¨ã»ã¼åŒæ§˜ã®æ–‡æ³•ã§ã‚ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªžã¨ã€  
ãã‚Œã‚’å®Ÿè¡Œå¯èƒ½ãª.exeãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã§ã™ã€‚

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€JSONãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’GNUã‚¢ã‚»ãƒ³ãƒ–ãƒªã«å¤‰æ›ã—ã€
ã•ã‚‰ã«ã‚¢ã‚»ãƒ³ãƒ–ãƒªã«ã«GNU ASã€GNU LDã‚’ä½¿ç”¨ã—ã¦çµæžœã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

[è‹±èªž(English)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/README.md)

- [GitHubãƒªãƒã‚¸ãƒˆãƒª](https://github.com/HAL-G1THuB/jsonpiler)  
- [Crates.io](https://crates.io/crates/jsonpiler)  
- [AIç”Ÿæˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ![badge](https://deepwiki.com/badge.svg)](https://deepwiki.com/HAL-G1THuB/jsonpiler)  
ðŸš¨ **Windowsã§ã®ã¿ä½œå‹•ã—ã¾ã™ (x64)!** ðŸš¨

## å¤‰æ›´å±¥æ­´

### 0.4.2

- æ–°ã—ã„é–¢æ•°`concat`ãŒè¿½åŠ ã•ã‚ŒãŸã€‚ã“ã®é–¢æ•°ã¯æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«åŒå£«ã‚’ãƒªãƒ†ãƒ©ãƒ«ã‚’ä¿ã¡ãªãŒã‚‰çµåˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚
- Objectã‚’3ã¤ã®äºœç¨®ã«åˆ†å‰²ã€‚
- **HashMap**: ã‚­ãƒ¼ã¨å€¤ã®ãƒšã‚¢ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ã™ã€‚
- **Sequence**: å‘½ä»¤ã®é †åºä»˜ã‘ã‚‰ã‚ŒãŸã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’è¡¨ã™ã€‚
- **TypeAnnotations**: å¤‰æ•°ã¾ãŸã¯é–¢æ•°ã®åž‹ã‚¢ãƒŽãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ã™ã€‚
- å››å‰‡æ¼”ç®—é–¢æ•°ã®å¼•æ•°ã‚’ä¸Žãˆãªã„å ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
- `lambda`ã®å¼•æ•°ã‚’å®Ÿè£…ã€‚
- `lambda`ã®è¿”ã‚Šå€¤ã«ã§ãã‚‹åž‹ãŒè±Šå¯Œã«ãªã£ãŸã€‚
- `+`, `/`, `*`, `or`, `and`, `xor`ã®æœ€ä½Žé™ã®å¼•æ•°ã®æ•°ãŒ2ã«ãªã£ãŸã€‚
- `message`ã®è¿”ã‚Šå€¤ãŒ`Null`ã«ãªã£ãŸã€‚

[ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ­´å²ã¨è¨ˆç”»](https://github.com/HAL-G1THuB/jsonpiler/blob/main/CHANGELOG-ja.md)

## å‰ææ¡ä»¶

**ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã€PATHç’°å¢ƒå¤‰æ•°ã§åˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„:**

- `ld` (from MinGW-w64)  
- `as` (from MinGW-w64)  

**ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ­£å¸¸ã«å‹•ä½œã•ã›ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®DLLãŒC:Windows/System32/ã«å­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**

- `kernel32.dll`  
- `user32.dll`  

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ä½¿ç”¨æ–¹æ³•

```bash
cargo install jsonpiler
jsonpiler (input_json_file (UTF-8)) [arguments of .exe ...]
```

(input_json_file)`ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ãŸã„å®Ÿéš›ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚

## é–¢æ•°ä¸€è¦§

[é–¢æ•°ä¸€è¦§ (ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/docs/functions.md)

## è¨€èªžä»•æ§˜

[è¨€èªžä»•æ§˜ (ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³)](https://github.com/HAL-G1THuB/jsonpiler/blob/main/docs/specification.md)

## ä¾‹

[ä¾‹](https://github.com/HAL-G1THuB/jsonpiler/blob/main/examples)

```json
{ "=": ["a", "title"], "message": [{"$": "a"}, "345"] }
```

**å®Ÿè¡Œé †åº:**

jsonpilerã®ã‚³ãƒ¼ãƒ‰ã¯ã€1ã¤ã®JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§æ§‹æˆã•ã‚Œã‚‹ã€‚

å¼ã¯é †ç•ªã«è©•ä¾¡ã•ã‚Œã‚‹ã€‚

ã‚­ãƒ¼ `"="` ã¯æ–‡å­—åˆ— `"title"` ã‚’å¤‰æ•° `a` ã«ä»£å…¥ã™ã‚‹ã€‚  

æ¬¡ã«ã€`"message"` ã‚­ãƒ¼ã¯ `a` ã®å€¤ã®å¾Œã«æ–‡å­—åˆ— `"345"` ã‚’ç¶šã‘ãŸã‚‚ã®ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã€‚  

æœ€å¾Œã«ã€`"+"`ã‚­ãƒ¼ã¯ `1`ã€`2`ã€`3`ã®å’Œã‚’è¨ˆç®—ã—ã€çµæžœ `6` ã‚’ç”Ÿæˆã™ã‚‹ã€‚

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ `{}` ãƒ–ãƒ­ãƒƒã‚¯ã®æœ€çµ‚å€¤ã¨ã—ã¦ `6` ã‚’è¿”ã™ã€‚

ã“ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’cargoã§å‹•ä½œã™ã‚‹jsonpilerã«èª­ã¿è¾¼ã¾ã›ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆä¸Šè¨˜ã®ã‚ˆã†ã«6ã‚’è¿”ã™ï¼‰ã€‚

```plaintext
error: process didn't exit successfullyï¼š `jsonpiler.exe test.json` (exit code: 6)

```

ã“ã‚Œã¯äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãã€æ­£å¸¸ãªå‹•ä½œã§ã‚ã‚‹ã€‚

## ã‚¨ãƒ©ãƒ¼ã€ã‚‚ã—ãã¯è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å½¢å¼

```json
{ "message": ["ã‚¿ã‚¤ãƒˆãƒ«", { "$": "å­˜åœ¨ã—ãªã„" }] }
```

```text
Compilation error: Undefined variables: `å­˜åœ¨ã—ãªã„`
Error occurred on line: 1
Error position:
{ "message": ["title", { "$": "doesn't_exist" }] }
                              ^^^^^^^^^^^^^^^
```

## å®Ÿè¡Œã®ã‚¤ãƒ¡ãƒ¼ã‚¸å›³

```mermaid
graph TD
  A[file.json] --> B{Jsonpiler}
  B -->|Parse| C([AST])
  C -->|æœ¬ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«| D[file.s]
  D --> |GNU ASã§ã‚¢ã‚»ãƒ³ãƒ–ãƒ«| E[file.obj]
  E --> |GNU LDã§ãƒªãƒ³ã‚¯| F[file.exe]
  S[C:\Windows\System32\] --> KERNEL32[kernel32.dll] --> F
  S --> USER32[user32.dll] --> F
  F --> Exec[(å®Ÿè¡Œ)]
```
